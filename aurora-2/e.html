<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Elastic Particle Web</title>
<style>
    body { margin:0; overflow:hidden; background:#111; }
    canvas { display:block; }
</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;

// -------------------- PARAMETERS --------------------
const NUM_PARTICLES = 40;
const SPRING_PROBABILITY = 0.25; // chance two particles connect
const SPRING_STIFFNESS = 0.02;
const SPRING_DAMPING = 0.9;
const PARTICLE_RADIUS = 4;
const MOUSE_FORCE = 0.15;

// -------------------- PARTICLE CLASS --------------------
class Particle {
    constructor(x,y){
        this.x = x;
        this.y = y;
        this.vx = 0;
        this.vy = 0;
        this.fx = 0;
        this.fy = 0;
    }
    applyForce(fx, fy){
        this.vx += fx;
        this.vy += fy;
    }
    update(){
        this.vx *= 0.998; // friction
        this.vy *= 0.998;
        this.x += this.vx;
        this.y += this.vy;
    }
}

// -------------------- INITIALIZATION --------------------
let particles = [];
for(let i=0;i<NUM_PARTICLES;i++){
    particles.push(new Particle(Math.random()*W, Math.random()*H));
}

// Springs: pairs of particle indices
let springs = [];
for(let i=0;i<NUM_PARTICLES;i++){
    for(let j=i+1;j<NUM_PARTICLES;j++){
        if(Math.random()<SPRING_PROBABILITY){
            springs.push({a:i,b:j,length:Math.hypot(particles[i].x-particles[j].x, particles[i].y-particles[j].y)});
        }
    }
}

// -------------------- MOUSE INTERACTION --------------------
let mouse = {x:W/2, y:H/2, down:false};
window.addEventListener('mousemove', e => { mouse.x=e.clientX; mouse.y=e.clientY; });
window.addEventListener('mousedown', ()=>{ mouse.down=true; });
window.addEventListener('mouseup', ()=>{ mouse.down=false; });

// -------------------- ANIMATION LOOP --------------------
function loop(){
    ctx.fillStyle = 'rgba(17,17,17,0.3)';
    ctx.fillRect(0,0,W,H);

    // SPRINGS
    ctx.strokeStyle = '#888';
    ctx.lineWidth = 1.2;
    for(let s of springs){
        let p1 = particles[s.a];
        let p2 = particles[s.b];
        let dx = p2.x - p1.x;
        let dy = p2.y - p1.y;
        let dist = Math.hypot(dx,dy);
        let diff = dist - s.length;
        let force = diff * SPRING_STIFFNESS;

        let fx = (dx/dist) * force;
        let fy = (dy/dist) * force;

        p1.applyForce(fx, fy);
        p2.applyForce(-fx, -fy);

        // draw line
        ctx.beginPath();
        ctx.moveTo(p1.x,p1.y);
        ctx.lineTo(p2.x,p2.y);
        ctx.stroke();
    }

    // MOUSE FORCE
    for(let p of particles){
        let dx = mouse.x - p.x;
        let dy = mouse.y - p.y;
        let dist = Math.hypot(dx,dy) + 0.01;
        if(mouse.down){
            p.applyForce(dx/dist*MOUSE_FORCE, dy/dist*MOUSE_FORCE); // attract
        } else {
            p.applyForce(-dx/dist*MOUSE_FORCE*0.2, -dy/dist*MOUSE_FORCE*0.2); // gentle repulsion
        }
    }

    // UPDATE PARTICLES
    for(let p of particles){
        p.update();

        // wrap around edges
        if(p.x<0) p.x=W;
        if(p.x>W) p.x=0;
        if(p.y<0) p.y=H;
        if(p.y>H) p.y=0;

        // draw particle
        ctx.fillStyle = '#3af';
        ctx.beginPath();
        ctx.arc(p.x,p.y, PARTICLE_RADIUS, 0, Math.PI*2);
        ctx.fill();
    }

    requestAnimationFrame(loop);
}
loop();

// -------------------- RESIZE HANDLER --------------------
window.addEventListener('resize', ()=>{
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
});
</script>
</body>
</html>
