<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Orthographic Cube Demo</title>
  <style>
    body { background:#222; color:#eee; font-family:sans-serif; text-align:center; }
    canvas { background:#111; display:block; margin:1rem auto; }
    .controls { display:flex; flex-wrap:wrap; justify-content:center; gap:1rem; }
    .control { display:flex; flex-direction:column; align-items:center; font-size:0.9rem; }
  </style>
</head>
<body>
  <h2>Orthographic Cube Demo</h2>
  <canvas id="canvas" width="600" height="600"></canvas>
  <div class="controls">
    <div class="control">
      <label>translateX</label>
      <input type="range" id="translateX" min="-200" max="200" value="0">
    </div>
    <div class="control">
      <label>translateY</label>
      <input type="range" id="translateY" min="-200" max="200" value="0">
    </div>
    <div class="control">
      <label>translateZ</label>
      <input type="range" id="translateZ" min="-4200" max="4200" value="2100">
    </div>
    <div class="control">
      <label>rotateX</label>
      <input type="range" id="rotateX" min="0" max="360" value="0">
    </div>
    <div class="control">
      <label>rotateY</label>
      <input type="range" id="rotateY" min="0" max="360" value="0">
    </div>
    <div class="control">
      <label>rotateZ</label>
      <input type="range" id="rotateZ" min="0" max="360" value="0">
    </div>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const W = canvas.width, H = canvas.height;

    // Cube vertices
    const size = 100;
    const vertices = [
      [-1, -1, -1],
      [ 1, -1, -1],
      [ 1,  1, -1],
      [-1,  1, -1],
      [-1, -1,  1],
      [ 1, -1,  1],
      [ 1,  1,  1],
      [-1,  1,  1],
    ].map(v => v.map(coord => coord * size/2));

    // Faces
    const faces = [
      [0,1,2,3], // back
      [4,5,6,7], // front
      [0,1,5,4], // bottom
      [2,3,7,6], // top
      [1,2,6,5], // right
      [0,3,7,4], // left
    ];

    // Colors
    const colors = [
      "#ff5555", // back
      "#55ff55", // front
      "#5555ff", // bottom
      "#ffff55", // top
      "#ff55ff", // right
      "#55ffff"  // left
    ];

    // Sliders
    const sliders = {
      translateX: document.getElementById("translateX"),
      translateY: document.getElementById("translateY"),
      translateZ: document.getElementById("translateZ"),
      rotateX: document.getElementById("rotateX"),
      rotateY: document.getElementById("rotateY"),
      rotateZ: document.getElementById("rotateZ"),
    };

    function rotate([x,y,z], rx, ry, rz) {
      // rotate around X
      let cos = Math.cos(rx), sin = Math.sin(rx);
      [y,z] = [y*cos - z*sin, y*sin + z*cos];
      // rotate around Y
      cos = Math.cos(ry); sin = Math.sin(ry);
      [x,z] = [x*cos + z*sin, -x*sin + z*cos];
      // rotate around Z
      cos = Math.cos(rz); sin = Math.sin(rz);
      [x,y] = [x*cos - y*sin, x*sin + y*cos];
      return [x,y,z];
    }

    // Orthographic projection (ignore z)
    function project([x,y,z]) {
      return [W/2 + x, H/2 + y];
    }

    function draw() {
      ctx.clearRect(0,0,W,H);

      const rx = sliders.rotateX.value * Math.PI/180;
      const ry = sliders.rotateY.value * Math.PI/180;
      const rz = sliders.rotateZ.value * Math.PI/180;
      const tx = +sliders.translateX.value;
      const ty = +sliders.translateY.value;
      const tz = +sliders.translateZ.value;

      const tVerts = vertices.map(v => {
        let [x,y,z] = rotate(v, rx, ry, rz);
        return [x+tx, y+ty, z+tz];
      });

      // Sort faces by average z (painter's algorithm)
      const faceDepths = faces.map((f,i) => {
        const zAvg = f.map(idx => tVerts[idx][2]).reduce((a,b)=>a+b,0)/f.length;
        return {i, zAvg};
      }).sort((a,b)=>a.zAvg - b.zAvg);

      faceDepths.forEach(({i}) => {
        const f = faces[i];
        ctx.beginPath();
        f.forEach((idx,j) => {
          const [px,py] = project(tVerts[idx]);
          if (j===0) ctx.moveTo(px,py);
          else ctx.lineTo(px,py);
        });
        ctx.closePath();
        ctx.fillStyle = colors[i];
        ctx.fill();
      });

      requestAnimationFrame(draw);
    }

    draw();
  </script>
</body>
</html>
