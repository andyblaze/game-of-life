<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bird Shape Editor</title>
<style>
  body { background: #f0f0f0; font-family: sans-serif; }
  canvas { background: white; border: 1px solid #ccc; cursor: crosshair; }
  textarea { width: 100%; height: 150px; margin-top: 10px; }
</style>
</head>
<body>

<canvas id="editor" width="1200" height="600"></canvas>
<canvas id="thumb" width="120" height="60"></canvas>
<textarea id="output" autocomplete="false"></textarea>

<script>
const img = new Image(1200, 600); // Create new img element
img.src = "swt.png"; // Set source path
const canvas = document.getElementById("editor");
const ctx = canvas.getContext("2d");
ctx.fillStyle = "black"; // silhouette color

const cx = 400; // center x
const cy = 200; // center y

ctx.beginPath();

// Body (nose to tail)
ctx.moveTo(cx, cy);              // nose
ctx.lineTo(cx - 20, cy + 60);    // left bottom body
ctx.lineTo(cx + 20, cy + 60);    // right bottom body
ctx.closePath();
ctx.fill();

// Left wing (straight swept back)
ctx.beginPath();
ctx.moveTo(cx - 5, cy + 10);     // attach to body
ctx.lineTo(cx - 120, cy - 40);   // wingtip back
ctx.lineTo(cx - 80, cy + 20);    // trailing edge back to body
ctx.closePath();
ctx.fill();

// Right wing (mirror)
ctx.beginPath();
ctx.moveTo(cx + 5, cy + 10);
ctx.lineTo(cx + 120, cy - 40);
ctx.lineTo(cx + 80, cy + 20);
ctx.closePath();
ctx.fill();

// Tail fins (optional)
ctx.beginPath();
ctx.moveTo(cx - 10, cy + 60);
ctx.lineTo(cx - 5, cy + 90);
ctx.lineTo(cx, cy + 60);
ctx.lineTo(cx + 5, cy + 90);
ctx.lineTo(cx + 10, cy + 60);
ctx.closePath();
ctx.fill();

const canvas2 = document.getElementById("thumb");
const ctx2 = canvas2.getContext("2d");
    ctx.strokeStyle = "#ddd";
    ctx.beginPath();
    ctx.moveTo(canvas.width/2, 0);
    ctx.lineTo(canvas.width/2, canvas.height);
    ctx.moveTo(0, canvas.height/2);
    ctx.lineTo(canvas.width, canvas.height/2);
    ctx.stroke();
const output = document.getElementById("output");


let points = [];
let isFirst = true;

canvas.addEventListener("click", (e) => {
    const rect = canvas.getBoundingClientRect();
    const x = Math.round(e.clientX - rect.left - canvas.width/2);
    const y = Math.round(e.clientY - rect.top - canvas.height/2);

    points.push({x,y});
    redraw();

    if (isFirst) {
        output.value = `this.offCtx.moveTo(${x}, ${y});\n`;
        isFirst = false;
    } else {
        output.value += `this.offCtx.lineTo(${x}, ${y});\n`;
    }
});

function redraw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.drawImage(img, 0, 0);
    ctx2.clearRect(0,0,canvas.width,canvas.height);
    
    // draw axes (origin is middle of canvas)
    ctx.strokeStyle = "#ddd";
    ctx.beginPath();
    ctx.moveTo(canvas.width/2, 0);
    ctx.lineTo(canvas.width/2, canvas.height);
    ctx.moveTo(0, canvas.height/2);
    ctx.lineTo(canvas.width, canvas.height/2);
    ctx.stroke();

    // draw polygon
    ctx.save();
    ctx.translate(canvas.width/2, canvas.height/2);
    ctx.drawImage(img, 0, 0);
    ctx.strokeStyle = "black";
    ctx.fillStyle = "rgba(0,0,0,0.2)";
    ctx.beginPath();
    
    ctx2.save();
    ctx2.translate(canvas.width/2, canvas.height/2);
    ctx2.strokeStyle = "black";
    ctx2.fillStyle = "rgba(0,0,0,0.2)";
    ctx2.beginPath();
    points.forEach((p, i) => {
        if (i === 0) {
            ctx.moveTo(p.x, p.y);
            ctx2.moveTo(p.x / 10, p.y / 10);
        }
        else {
            ctx.lineTo(p.x, p.y);
            ctx2.lineTo(p.x /10, p.y/10);
        }
    });
    //ctx.closePath();
    //ctx.fill();
    ctx.stroke();
    ctx2.stroke();

    // draw points
    ctx.fillStyle = "red";
    points.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, 3, 0, Math.PI*2);
        ctx.fill();
    });
    ctx.restore();
    ctx2.restore();
}
</script>

</body>
</html>
